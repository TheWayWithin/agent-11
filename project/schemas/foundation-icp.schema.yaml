# ICP (Ideal Customer Profile) / Client Success Blueprint Schema
# Purpose: Structured user profiles for agents to understand target users
# Usage: /foundations init extracts source docs to this format

$schema: "http://json-schema.org/draft-07/schema#"
type: object
description: "Structured ideal customer profiles for user-centric development"

required:
  - primary_profile

properties:
  primary_profile:
    type: object
    required: [name, description]
    properties:
      name:
        type: string
        description: "Profile name (e.g., 'Multi-Product Indie Hacker')"
      description:
        type: string
        description: "Brief description of this user type"
      demographics:
        type: object
        properties:
          business_type:
            type: string
          team_size:
            type: string
          revenue_range:
            type: string
          products_managed:
            type: string
          years_in_business:
            type: string
          tech_savviness:
            type: string
            enum: [low, medium, high]

  personas:
    type: array
    description: "Detailed user personas"
    items:
      type: object
      required: [name, type, priority]
      properties:
        name:
          type: string
          description: "Persona name (e.g., 'Sarah the Scaling Solopreneur')"
        type:
          type: string
          description: "Persona type/category"
        priority:
          type: integer
          description: "1=primary target, 2=secondary, etc."
        demographics:
          type: object
          properties:
            products:
              type: string
            mrr:
              type: string
            support_volume:
              type: string
            stripe_accounts:
              type: integer
            email_accounts:
              type: integer
        daily_reality:
          type: string
          description: "What their day looks like"
        pain_points:
          type: array
          items:
            type: object
            properties:
              pain:
                type: string
              severity:
                type: string
                enum: [critical, high, medium, low]
              frequency:
                type: string
                enum: [daily, weekly, monthly, occasionally]
        goals:
          type: array
          items:
            type: string
        frustrations:
          type: array
          items:
            type: string
        current_solutions:
          type: array
          items:
            type: object
            properties:
              tool:
                type: string
              purpose:
                type: string
              limitation:
                type: string
        success_looks_like:
          type: string
          description: "What success means for this persona"
        quotes:
          type: array
          items:
            type: string
          description: "Representative quotes from this persona type"

  pain_points:
    type: object
    description: "Aggregated pain points across personas"
    properties:
      critical:
        type: array
        items:
          type: object
          properties:
            pain:
              type: string
            impact:
              type: string
            frequency:
              type: string
      high:
        type: array
        items:
          $ref: "#/properties/pain_points/properties/critical/items"
      medium:
        type: array
        items:
          $ref: "#/properties/pain_points/properties/critical/items"

  jobs_to_be_done:
    type: array
    description: "Jobs users are trying to accomplish"
    items:
      type: object
      properties:
        job:
          type: string
        context:
          type: string
          description: "When/why they need to do this job"
        current_approach:
          type: string
        desired_outcome:
          type: string
        success_metric:
          type: string

  buying_triggers:
    type: array
    description: "What triggers them to seek a solution"
    items:
      type: object
      properties:
        trigger:
          type: string
        timing:
          type: string
        urgency:
          type: string
          enum: [immediate, soon, eventually]

  objections:
    type: array
    description: "Common objections and how to address them"
    items:
      type: object
      properties:
        objection:
          type: string
        response:
          type: string
        evidence:
          type: string

  success_criteria:
    type: object
    description: "How customers define success"
    properties:
      quantitative:
        type: array
        items:
          type: object
          properties:
            metric:
              type: string
            target:
              type: string
            timeframe:
              type: string
      qualitative:
        type: array
        items:
          type: string

  anti_personas:
    type: array
    description: "Who we're NOT building for"
    items:
      type: object
      properties:
        type:
          type: string
        why_not:
          type: string
