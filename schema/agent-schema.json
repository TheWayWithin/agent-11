{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agent-11.dev/schemas/agent-v4.json",
  "title": "AGENT-11 Agent Definition Schema",
  "description": "JSON Schema for validating AGENT-11 agent YAML frontmatter (v4.0 - Opus 4.5 Integration)",
  "type": "object",
  "required": ["name", "description"],

  "properties": {
    "name": {
      "type": "string",
      "description": "Unique agent identifier",
      "pattern": "^[a-z][a-z0-9-]*$",
      "minLength": 2,
      "maxLength": 50,
      "examples": ["coordinator", "developer", "architect", "design-review"]
    },

    "description": {
      "type": "string",
      "description": "Brief agent description shown in Claude Code UI",
      "minLength": 10,
      "maxLength": 500,
      "examples": [
        "Use this agent for orchestrating complex multi-agent missions",
        "Full-stack implementation specialist for code and features"
      ]
    },

    "version": {
      "type": "string",
      "description": "Semantic version of agent schema/capabilities",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.0.0",
      "examples": ["1.0.0", "2.1.3", "3.0.0"]
    },

    "status": {
      "type": "string",
      "description": "Agent maturity and stability level",
      "enum": ["stable", "beta", "experimental", "deprecated"],
      "default": "stable"
    },

    "model": {
      "type": "string",
      "description": "Default Claude model for this agent (Opus 4.5 integration)",
      "enum": ["opus", "sonnet", "haiku"],
      "examples": ["opus", "sonnet", "haiku"]
    },

    "model_recommendation": {
      "type": "string",
      "description": "Advisory field for when to use different model tiers",
      "enum": ["opus_for_complex", "sonnet_default", "haiku_for_simple"],
      "examples": ["opus_for_complex", "sonnet_default", "haiku_for_simple"]
    },

    "color": {
      "type": "string",
      "description": "Visual identifier in Claude Code UI (color name or hex)",
      "pattern": "^([a-z]+|#[0-9A-Fa-f]{6})$",
      "examples": ["green", "blue", "purple", "#FF5733"]
    },

    "tags": {
      "type": "array",
      "description": "Categories for filtering and discovery",
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z0-9-]*$"
      },
      "uniqueItems": true,
      "examples": [
        ["core", "technical"],
        ["creative", "design"],
        ["qa", "testing"]
      ]
    },

    "thinking": {
      "type": "object",
      "description": "Extended thinking configuration",
      "properties": {
        "default": {
          "type": "string",
          "description": "Default extended thinking mode",
          "enum": ["think", "think hard", "think harder", "ultrathink"],
          "examples": ["think", "think hard", "ultrathink"]
        },
        "when_to_use_deeper": {
          "type": "string",
          "description": "Brief guide on when to use deeper thinking modes",
          "maxLength": 200,
          "examples": [
            "Use ultrathink for system architecture, think harder for component design",
            "Complex features need think hard, routine tasks use think"
          ]
        }
      },
      "additionalProperties": false
    },

    "tools": {
      "type": "object",
      "description": "Tool permissions - structured for validation",
      "properties": {
        "primary": {
          "type": "array",
          "description": "Essential tools for agent's core responsibilities",
          "items": {
            "type": "string",
            "pattern": "^[A-Z][A-Za-z]*$"
          },
          "uniqueItems": true,
          "examples": [
            ["Read", "Write", "Edit", "Bash", "Task"],
            ["Read", "Grep", "Glob", "WebSearch", "Task"]
          ]
        },
        "mcp": {
          "type": "array",
          "description": "MCP tools agent can use when available",
          "items": {
            "type": "string",
            "pattern": "^mcp__[a-z0-9_-]+$"
          },
          "uniqueItems": true,
          "examples": [
            ["mcp__github", "mcp__context7", "mcp__playwright"],
            ["mcp__supabase", "mcp__stripe", "mcp__netlify"]
          ]
        },
        "restricted": {
          "type": "array",
          "description": "Tools agent is NOT permitted to use",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "examples": [
            ["WebSearch", "MultiEdit"],
            ["Bash", "mcp__stripe"]
          ]
        }
      },
      "additionalProperties": false
    },

    "coordinates_with": {
      "type": "array",
      "description": "Agents this agent frequently collaborates with",
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z0-9-]*$"
      },
      "uniqueItems": true,
      "examples": [
        ["developer", "tester", "operator"],
        ["architect", "strategist", "designer"]
      ]
    },

    "escalates_to": {
      "type": "string",
      "description": "Default agent for escalations and blockers",
      "pattern": "^@[a-z][a-z0-9-]*$",
      "default": "@coordinator",
      "examples": ["@coordinator", "@architect", "@strategist"]
    },

    "verification_required": {
      "type": "boolean",
      "description": "Indicates if agent has pre-handoff checklist",
      "default": false
    },

    "self_verification": {
      "type": "boolean",
      "description": "Indicates if agent has self-verification protocol",
      "default": false
    },

    "custom": {
      "type": "object",
      "description": "Custom fields for future extensions",
      "additionalProperties": true
    }
  },

  "additionalProperties": false,

  "examples": [
    {
      "name": "coordinator",
      "description": "Mission commander orchestrating multi-agent operations",
      "version": "4.0.0",
      "status": "stable",
      "model": "opus",
      "color": "green",
      "tags": ["core", "coordination"],
      "thinking": {
        "default": "think hard"
      },
      "tools": {
        "primary": ["Task", "TodoWrite", "Write", "Read", "Edit"],
        "mcp": ["mcp__github"],
        "restricted": ["Bash", "MultiEdit"]
      },
      "coordinates_with": [],
      "escalates_to": "@user",
      "verification_required": true,
      "self_verification": true
    },
    {
      "name": "developer",
      "description": "Full-stack implementation specialist",
      "version": "4.0.0",
      "status": "stable",
      "model_recommendation": "sonnet_default",
      "color": "blue",
      "tags": ["core", "technical"],
      "thinking": {
        "default": "think"
      },
      "tools": {
        "primary": ["Read", "Write", "Edit", "Bash", "Task"],
        "mcp": ["mcp__github", "mcp__context7", "mcp__supabase"],
        "restricted": ["WebSearch"]
      },
      "coordinates_with": ["architect", "tester", "operator"],
      "escalates_to": "@coordinator",
      "verification_required": true,
      "self_verification": true
    },
    {
      "name": "architect",
      "description": "Elite system design specialist",
      "version": "4.0.0",
      "status": "stable",
      "model_recommendation": "opus_for_complex",
      "color": "yellow",
      "tags": ["core", "technical", "design"],
      "thinking": {
        "default": "ultrathink",
        "when_to_use_deeper": "Always use ultrathink for system architecture decisions"
      },
      "tools": {
        "primary": ["Read", "Write", "Edit", "Grep", "Glob", "Task"],
        "mcp": ["mcp__grep", "mcp__context7", "mcp__firecrawl"],
        "restricted": ["Bash", "MultiEdit", "mcp__github"]
      },
      "coordinates_with": ["strategist", "developer", "operator"],
      "escalates_to": "@coordinator",
      "verification_required": true,
      "self_verification": true,
      "custom": {
        "research_tools": ["mcp__context7", "mcp__firecrawl"]
      }
    }
  ]
}
